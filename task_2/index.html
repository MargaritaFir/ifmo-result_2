<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="description" content="Последовательное выполнение асинхронных заданий в цикле">

	<title>Асинхронные задания</title>
</head>
	
	<body>

	<h4 title="GossJS" id="author">Фирсова Маргарита</h4>
	<article>
	Результат задания отображается в консоли
	</article>
	
	<script>
		const values = [10, 20, 30];
		const URLs = [
		  'https://kodaktor.ru/api/m/',
		  'https://kodaktor.ru/api/MS2/',
		  'https://kodaktor.ru/api/MS3/',
		];

		(async (a, b) => { 
		  let next = 0;
		  for (let i = 0; i < a.length; i++ ) {
		    
		    let r = await fetch((b[i] + a[i] + '/' + next), {
		      headers: {'Content-Type': 'application/json'}
		    })
		    .then(response => response.json())
		    console.log(b[i] + a[i] + '/' + next);
		    next = r.result;
		    
		    document.body.innerHTML = `<h1>${next}</h1>`
		  }
		})(values, URLs);
	</script>
	</body>
</html>